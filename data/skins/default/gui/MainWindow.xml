<window
    id="mainwindow"
    title="Dotto"
    controller="script, shortcut"
    steal-focus="true"
    script="%skin/ui.js"
    flow="column">

  <background/>

  <node id="editorcontainer" absolute="true" x="0px" y="0px" width="100%" height="100%"/>

  <image id="mainbar" absolute="true" x="0" y="0" width="100%" height="35px" flow="row">
    <menubutton id="startbutton"
                click="toggleui id=filemenu"
                label="File"
                width="100px"/>
    <documentbar/>
    <image controller="tabtarget, button"
           id="toolconfigbutton"
           visible="false"
           margin="4 4 4 4"
           width="24px"
           click="ToggleUI id=toolconfigsidebar"/>
    <image controller="tabtarget, button" id="togglelayersbutton" click="ToggleUI id=layersidebar" src="%appdata/icons/layers.png" margin="4 4 4 4" width="24px"/>
    <image controller="tabtarget, button" id="togglefiltersbutton" click="ToggleUI id=filtersidebar" src="%appdata/icons/filters.png" margin="4 4 4 4" width="24px"/>
    <image controller="inputcolor" src="%appdata/icons/color.png" forward="multiply=value" margin="4 4 4 4" width="24px" alwaysupdate="true"/>
    <span controller="inputcolor"
          forward="text=value"
          width="130px"
          margin="4 8 4 4"
          text-transform="replace"
          match="rgba\{([0-9]+),([0-9]+),([0-9]+),([0-9]+)\}"
          replacement="$1:$2:$3:$4"
          alwaysupdate="true"/>
  </image>

  <node controller="toolbox" id="toolbox" extra-height="35"/>

  <clickout id="layersidebar" class="sidebar">
    <image class="sidebarcontainer">
      <layercontrols/>
      <node controller="layerlist" width="200px"/>
    </image>
  </clickout>

  <clickout id="filtersidebar" class="sidebar">
    <image class="sidebarcontainer">
      <node controller="filterlist" width="200px"/>
    </image>
  </clickout>

  <clickout id="colorsidebar" class="sidebar">
    <image id="colorpanel" class="sidebarcontainer" width="200px"/>
  </clickout>

  <clickout id="toolconfigsidebar" class="sidebar">
    <image id="toolconfigmenu" class="sidebarcontainer" controller="metamenu" width="100px"/>
  </clickout>

  <clickout id="filemenu" class="sidebar">
    <image class="sidebarcontainer" height="250px" width="170px" x="0" y="35px">
      <menubutton id="newbutton" click="newfile interactive=true" label="New"/>
      <menubutton id="openbutton" click="openfile" label="Open"/>
      <menubutton id="closebutton" click="closefile" label="Close"/>
      <node class="menuspacer"/>
      <menubutton id="savebutton" click="savefile" label="Save"/>
      <menubutton id="saveAsbutton" click="savefile saveas=true" label="Save As..."/>
      <menubutton id="exportbutton" click="savefile saveas=true export=true" label="Export..."/>
      <node class="menuspacer"/>
      <menubutton id="quitbutton" click="quit" label="Quit"/>
      <node class="menuspacer"/>
      <menubutton id="hellobutton" label="Hello, ${username}!"/>
    </image>
  </clickout>

</window>
